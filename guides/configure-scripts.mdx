---
title: Configure Scripts
description: Set up automatic setup, run, and cleanup scripts for your projects
---

Scripts automate repetitive tasks in your workflow. Set them up once, and Termpad runs them at the right time automatically.

## Script Types

Termpad supports three types of scripts:

| Type | When It Runs | Use For |
|------|--------------|---------|
| Setup | When creating a new worktree | Installing dependencies, building assets |
| Run | When you click "Run" | Starting dev server, running tests |
| Cleanup | When deleting a worktree | Stopping processes, cleaning artifacts |

## Configuring Scripts

<Steps>
  <Step title="Select your project">
    Click on a project in the sidebar.
  </Step>
  <Step title="Open project settings">
    Click the gear icon next to the project name.
  </Step>
  <Step title="Navigate to Scripts">
    Find the scripts configuration section.
  </Step>
  <Step title="Add your scripts">
    Enter commands for each script type.
  </Step>
  <Step title="Save">
    Click Save to apply your changes.
  </Step>
</Steps>

## Setup Scripts

Setup scripts run automatically when you create a new worktree. Use them for:

- Installing dependencies
- Setting up environment files
- Building initial assets
- Starting background services

### Examples

<Tabs>
  <Tab title="Node.js">
    ```bash
    npm install
    ```

    Or with additional setup:
    ```bash
    npm install && npm run build:types
    ```
  </Tab>
  <Tab title="Python">
    ```bash
    python -m venv .venv && source .venv/bin/activate && pip install -r requirements.txt
    ```
  </Tab>
  <Tab title="Rust">
    ```bash
    cargo fetch
    ```
  </Tab>
  <Tab title="Go">
    ```bash
    go mod download
    ```
  </Tab>
</Tabs>

<Tip>
  Keep setup scripts fast. Long setup times slow down worktree creation.
</Tip>

## Run Scripts

Run scripts are manually triggered commands for common tasks. You can have multiple run scripts per project.

### Creating run scripts

<Steps>
  <Step title="Open script settings">
    Navigate to the run scripts section.
  </Step>
  <Step title="Add a new script">
    Click **Add Run Script**.
  </Step>
  <Step title="Configure the script">
    Enter a name (e.g., "Dev Server") and the command.
  </Step>
  <Step title="Set options">
    Configure exclusive mode if needed.
  </Step>
</Steps>

### Common run scripts

| Name | Command | Purpose |
|------|---------|---------|
| Dev Server | `npm run dev` | Start development server |
| Tests | `npm test` | Run test suite |
| Build | `npm run build` | Build for production |
| Lint | `npm run lint` | Check code style |
| Format | `npm run format` | Format code |

### Running a script

<Steps>
  <Step title="Select a worktree">
    Click on the worktree where you want to run the script.
  </Step>
  <Step title="Click Run">
    Click the **Run** button in the toolbar.
  </Step>
  <Step title="Choose a script">
    Select which script to run from the dropdown.
  </Step>
</Steps>

### Exclusive mode

Some scripts can't run in multiple worktrees (e.g., dev servers that need a specific port). Enable **exclusive mode** for these scripts.

When you run an exclusive script:

1. Termpad checks if it's running elsewhere
2. If yes, it stops the other instance
3. Then starts the script in your current worktree

<Warning>
  Exclusive mode kills the script in other worktrees. Only use it when necessary.
</Warning>

## Cleanup Scripts

Cleanup scripts run when you delete a worktree. Use them for:

- Stopping running processes
- Removing build artifacts
- Cleaning temporary files
- Resetting state

### Examples

<Tabs>
  <Tab title="Node.js">
    ```bash
    rm -rf node_modules/.cache dist
    ```
  </Tab>
  <Tab title="Python">
    ```bash
    rm -rf __pycache__ .pytest_cache .venv
    ```
  </Tab>
  <Tab title="General">
    ```bash
    # Kill any processes started by this worktree
    pkill -f "$(pwd)" || true
    ```
  </Tab>
</Tabs>

## Environment Variables

Scripts have access to Termpad-provided environment variables:

| Variable | Description |
|----------|-------------|
| `TERMPAD_SESSION` | Name of the current worktree |
| `TERMPAD_BRANCH` | Current git branch name |
| `TERMPAD_WORKTREE` | Full path to the worktree directory |
| `TERMPAD_PORT` | Unique port number (if port management enabled) |

### Using environment variables

```bash
# In a run script
echo "Starting server for $TERMPAD_BRANCH on port $TERMPAD_PORT"
PORT=$TERMPAD_PORT npm run dev
```

## Smart Port Management

Avoid port conflicts when running dev servers across worktrees:

<Steps>
  <Step title="Enable port management">
    In project settings, enable **Smart Port Management**.
  </Step>
  <Step title="Configure your scripts">
    Use `$TERMPAD_PORT` in your run scripts:

    ```bash
    PORT=$TERMPAD_PORT npm run dev
    ```
  </Step>
  <Step title="Each worktree gets a unique port">
    Worktree 1 might get port 3000, worktree 2 gets 3001, etc.
  </Step>
</Steps>

## Script Tips

### Chain commands

Run multiple commands in sequence:

```bash
npm install && npm run build && npm test
```

### Handle failures gracefully

Use `|| true` to prevent script failure from blocking:

```bash
# Don't fail if there's nothing to clean
rm -rf dist || true
```

### Keep scripts simple

If your script is complex, put it in a file:

```bash
./scripts/setup.sh
```

Then reference that file in Termpad.

### Test scripts manually first

Before adding a script to Termpad, test it in a terminal to make sure it works.
